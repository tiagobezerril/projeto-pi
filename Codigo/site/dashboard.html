<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeWare | Dashboard</title>

    <link rel="shortcut icon" type="imagex/png" href="img/logo.png">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=close,menu,person" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header class="menu">
        <div class="esquerda">
            <span href="" id="burguer" class="material-symbols-outlined" onclick="clickMenu()">
                menu
            </span>
        </div>
        <div class="centro">
            <a href="" style="width: 100px; display: contents;"><span class="logo">SafeWare</span></a>
        </div>
        <div class="direita">
            <a onclick="clickPerfil()" class="perfil">
                <span class="material-symbols-outlined">
                    person
                </span>
            </a>
        </div>
    </header>

    <div id="opcoes">
        <span>Cozinha 1</span>
        <span class="linha"></span>
        <span></span>
        <span class="linha"></span>
        <span></span>
        <span class="linha"></span>
    </div>

    <div id="dadoSensores">
        <span class="esquerda">
            <p class="titulo">Frizza's Kitchen - Cozinha 01</p>
        </span>
        <span class="direita">
            <button onclick="clickSensor()" id="butaoSensor1" class="alerta">Sensor 1</button>
            <button onclick="clickSensor()" id="butaoSensor2">Sensor 2</button>
            <button onclick="clickSensor()" id="butaoSensor3">Sensor 3</button>
        </span>
    </div>
    <div class="dash" id="sensor1">
        <div class="cima">
            <div class="esquerda">
                <span style="display: flex; flex-direction: row; justify-content: space-between;">
                    <p id="tituloSensor1" class="titulo alerta">Sensor 1</p>
                    <div class="metricas">
                        <span class="seguro">Seguro</span>
                        <span class="risco">Em risco</span>
                        <span class="extremo">Extremo risco</span>
                        
                        <p style="width: 80px;">0%</p>
                        <p style="width: 100px;">>1% e <5%</p>
                        <p style="width: 120px;">>5% </p>
                    </div>
                </span>
                <span>
                    <p class="graficoTitulo">Porcentagem de vazamento durante o dia</p>
                    <canvas id="graficoLinha" class="graficoLinha"></canvas>
                </span>
            </div>
            <div class="direita">
                <span>
                    <p class="graficoTitulo">Porcentagem atual</p>
                    <canvas id="graficoMeia" class="meiaLua">Grafico</canvas>
                </span>

                <div class="KPIs">
                    <span class="inicio">
                        <p class="nome">Horario de início</p>
                        <p class="dado">11:32:06</p>
                    </span>
                    <span class="final">
                        <p class="nome">Horario de encerramento</p>
                        <p class="dado" style="color: #e63535;">Ativo</p>
                    </span>
                    <span class="status alerta">
                        <p class="nome">Status de vazamento</p>
                        <p class="dado">Ativo</p>
                    </span>
                </div>
            </div>
        </div>

        <div class="baixo">
            <span>
                <label>Mês: </label>
                <select id="">
                    <option value="1">Janeiro</option>
                    <option value="2">Fevereiro</option>
                    <option value="3">Março</option>
                    <option value="4">Abril</option>
                    <option value="5">Maio</option>
                    <option value="6">Junho</option>
                    <option value="7">Julho</option>
                    <option value="8">Agosto</option>
                    <option value="9">Setembro</option>
                    <option value="10">Outubro</option>
                    <option value="11">Novembro</option>
                    <option value="12">Dezembro</option>
                </select>
            </span>
            
        </div>
        <div class="baixo2">
            <p class="graficoTitulo">Quantidade de vazamentos Mensal Cozinha 01 </p>
            <canvas id="teste" style="width: 100%;"></canvas>

        </div>
    </div>

    <div class="dash" id="sensor2">

        <div class="cima">
            <div class="esquerda">
                <span>
                    <p id="tituloSensor2" class="titulo">Sensor 2</p>
                </span>
                <span>
                    <p class="graficoTitulo">Porcentagem de vazamento durante o dia</p>
                    <canvas id="sensorAnalogico2" class="graficoLinha"></canvas>
                </span>
            </div>
            <div class="direita">
                <span>
                    <p class="graficoTitulo">Porcentagem atual</p>
                    <canvas id="estaticoMeia" class="meiaLua">Grafico</canvas>
                </span>

                <div class="KPIs">
                    <span class="inicio">
                        <p class="nome">Horario de início</p>
                        <p class="dado">--</p>
                    </span>
                    <span class="final">
                        <p class="nome">Horario de encerramento</p>
                        <p class="dado">--</p>
                    </span>
                    <span class="status seguro">
                        <p class="nome">Status de vazamento</p>
                        <p class="dado">Sem vazamento</p>
                    </span>
                </div>
            </div>
        </div>

        <div class="baixo">
            <span>
                <label>Mês: </label>
                <select id="">
                    <option value="1">Janeiro</option>
                    <option value="2">Fevereiro</option>
                    <option value="3">Março</option>
                    <option value="4">Abril</option>
                    <option value="5">Maio</option>
                    <option value="6">Junho</option>
                    <option value="7">Julho</option>
                    <option value="8">Agosto</option>
                    <option value="9">Setembro</option>
                    <option value="10">Outubro</option>
                    <option value="11">Novembro</option>
                    <option value="12">Dezembro</option>
                </select>
            </span>
            <p class="graficoTitulo">Quantidade de vazamentos por sensor</p>
            <canvas id="graficoMes2"></canvas>
        </div>
    </div>

    <div class="dash" id="sensor3">

        <div class="cima">
            <div class="esquerda">
                <span>
                    <p id="tituloSensor3" class="titulo">Sensor 3</p>
                </span>
                <span>
                    <p class="graficoTitulo">Porcentagem de vazamento durante o dia</p>
                    <canvas id="sensorAnalogico3" class="graficoLinha"></canvas>
                </span>
            </div>
            <div class="direita">
                <span>
                    <p class="graficoTitulo">Porcentagem atual</p>
                    <canvas id="estaticoMeia" class="meiaLua">Grafico</canvas>
                </span>

                <div class="KPIs">
                    <span class="inicio">
                        <p class="nome">Horario de início</p>
                        <p class="dado">--</p>
                    </span>
                    <span class="final">
                        <p class="nome">Horario de encerramento</p>
                        <p class="dado">--</p>
                    </span>
                    <span class="status seguro">
                        <p class="nome">Status de vazamento</p>
                        <p class="dado">Sem vazamento</p>
                    </span>
                </div>
            </div>
        </div>

        <div class="baixo">
            <span>
                <label>Mês: </label>
                <select id="">
                    <option value="1">Janeiro</option>
                    <option value="2">Fevereiro</option>
                    <option value="3">Março</option>
                    <option value="4">Abril</option>
                    <option value="5">Maio</option>
                    <option value="6">Junho</option>
                    <option value="7">Julho</option>
                    <option value="8">Agosto</option>
                    <option value="9">Setembro</option>
                    <option value="10">Outubro</option>
                    <option value="11">Novembro</option>
                    <option value="12">Dezembro</option>
                </select>
            </span>
            <p class="graficoTitulo">Quantidade de vazamentos por sensor</p>
            <canvas id="graficoMes3"></canvas>
        </div>
    </div>

    <div id="perfil">
        <p class="titulo">Perfil</p>
        <span class="linha"></span>
        <div class="form">
            <p class="subtitulo">Atualize o endereço do estabelecimento</p>
            <p for="">Estado:</p>
            <select id="">
                <option value="AC">Acre</option>
                <option value="AL">Alagoas</option>
                <option value="AP">Amapá</option>
                <option value="AM">Amazonas</option>
                <option value="BA">Bahia</option>
                <option value="CE">Ceará</option>
                <option value="ES">Espírito Santo</option>
                <option value="GO">Goiás</option>
                <option value="MA">Maranhão</option>
                <option value="MT">Mato grosso</option>
                <option value="MS">Mato grosso do Sul</option>
                <option value="MG">Minas gerais</option>
                <option value="PA">Pará</option>
                <option value="PB">Paraíba</option>
                <option value="PR">Paraná</option>
                <option value="PE">Pernambuco</option>
                <option value="PI">Piauí</option>
                <option value="RJ">Rio de Janeiro</option>
                <option value="RN">Rio Grande do Norte</option>
                <option value="RS">Rio Grande do Sul</option>
                <option value="RO">Rondônia</option>
                <option value="RR">Roraima</option>
                <option value="SC">Santa Catarina</option>
                <option value="SP">São Paulo</option>
                <option value="SE">Sergipe</option>
                <option value="TO">Tocantins</option>
            </select>
            <p for="">Cidade:</p>
            <input type="text" placeholder="Cidade">
            <p for="">Rua:</p>
            <input type="text" placeholder="Rua">
            <p for="">Número:</p>
            <input type="number" placeholder="Número">
            <button>Enviar</button>
        </div>
        <span id="close" onclick="clickClose()" class="material-symbols-outlined">
            close
        </span>
    </div>
</body>

</html>
<script>
    function clickMenu() {
        if (opcoes.style.left == '-300px') {
            opcoes.style.left = '0';
        } else {
            opcoes.style.left = '-300px';
        }
    }

    function clickPerfil() {
        if (perfil.style.right == '-620px') {
            perfil.style.right = '0';
        } else {
            perfil.style.right = '-620px';
        }
    }

    function clickClose() {
        perfil.style.right = '-620px';
    }

    function clickSensor1(){
        sensor1.style.display = 'flex';
        sensor2.style.display = 'none';
        sensor3.style.display = 'none';
    }

    function clickSensor2(){
        sensor1.style.display = 'none';
        sensor2.style.display = 'flex';
        sensor3.style.display = 'none';
    }

    function clickSensor3(){
        sensor1.style.display = 'none';
        sensor2.style.display = 'none';
        sensor3.style.display = 'flex';
    }

    var sensorAnalogico = document.getElementById('graficoLinha').getContext('2d')

    var dadosLabel = ['05h','06h','07h','08h','09h','10h','11h','12h','13h','14h','15h'];

    const configLinha = {
        type: 'line',
        data: {
            datasets: [{
                label: 'Índice de vazamento',
                borderColor: '#e63535',
                backgroundColor: '#e63535',
                data: [0,0,0,0,0,0,0,1,2,2,3] // COMENTAR QUANDO FOR CONECTAR NA API
            }],
            labels: dadosLabel // COMENTAR QUANDO FOR CONECTAR NA API
            
        },
        options: {
            scales: {
                x: {
                    beginAtZero: true
                },
                y: {
                    title: {
                        display: true,
                        text: '(%)'
                    },
                    beginAtZero: true,
                },
            },

        }
    }

    var grafico = new Chart(sensorAnalogico, configLinha);

    /// --------------------------GRAFICO MEIA LUA----------------------------------------------------------

    // CONFIGURAÇÃO DE MEIA LUA 

    var vazamentoAtual = document.getElementById("graficoMeia").getContext('2d');

    var valorVazamento = 4;

    const configVazamentoAtual = {
        type: 'doughnut',
        data: {
            labels: ["Vazamento atual"],
            datasets: [{
                backgroundColor: ['#e63535','rgba(0, 0, 0, 0.1)'],
                borderWidth: 0,
                data: [valorVazamento, 45 - valorVazamento]
            }]
        },
        options: {
            responsive: true,
            cutoutPercentage: 85,
            rotation: -90,
            circumference: 180,
            tooltips: {
                enabled: false
            },
            legend: {
                display: false
            },
            animation: {
                animateRotate: true,
                animateScale: false
            },
            title: {
                display: true,
                text: "Vazamento atual",
                fontSize: 16
            }
        }
    }

    
    var chart = new Chart(vazamentoAtual, configVazamentoAtual);

</script>